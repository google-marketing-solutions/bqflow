{
    "script": {
        "released": "2023-03-01",
        "license": "Licensed under the Apache License, Version 2.0",
        "copyright": "Copyright 2023 Google LLC",
        "from": [
            "cm360"
        ],
        "to": [
            "bigquery"
        ],
        "title": "CM360 Report To BigQuery",
        "description": "Move existing CM report into a BigQuery table.",
        "instructions": [
            "Specify an account id in the format: accountId@profileId",
            "Specify either report name or report id to move a report.",
            "The most recent valid file will overwrite the table.",
            "Schema is pulled from the official CM specification.",
            "The schema provided below is just an example"
        ]
    },
    "tasks": [
        {
            "dataset": {
                "description": "Create a BigQuery dataset.",
                "auth": "service",
                "dataset": ""
            }
        },
        {
            "cm_report": {
                "description": "Run a CM360 Report",
                "auth": "service",
                "report": {
                    "account": "",
                    "report_id": "",
                    "name": ""
                },
                "report_run_only": true
            }
        },
        {
            "cm_report": {
                "description": "Fetch and download a CM360 Report",
                "auth": "service",
                "report": {
                    "account": "",
                    "report_id": "",
                    "name": ""
                },
                "out": {
                    "bigquery": {
                        "auth": "service",
                        "dataset": "",
                        "table": "",
                        "header": true,
                        "schema": [
                            {
                                "name": "Advertiser",
                                "type": "STRING"
                            },
                            {
                                "name": "Advertiser_Id",
                                "type": "INTEGER"
                            },
                            {
                                "name": "Campaign",
                                "type": "STRING"
                            },
                            {
                                "name": "Campaign_Id",
                                "type": "INTEGER"
                            },
                            {
                                "name": "Impressions",
                                "type": "FLOAT"
                            }
                        ]
                    }
                }
            }
        }
    ]
}